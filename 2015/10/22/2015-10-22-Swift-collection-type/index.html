<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Swift笔记 - 集合类型 | TBXark</title>
  <meta name="viewport" content="width=device-width">
  <meta name="keywords" content="tbxark,vfanx,范名睿,swift,iOS,objective-c" />


  
  
    <link rel="icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
</head>

<body>
  <div id="container">
    <div class="mobile-nav-panel">
	<i class="icon-reorder icon-large"></i>
</div>
<header id="header">
	<h1 class="blog-title">
		<a href="/">TBXark</a>
	</h1>
	<nav class="nav">
		<ul>
			<li><a href="/">home</a></li><li><a href="http://github.com/tbxark">github</a></li><li><a href="/archives">archives</a></li><li><a href="/about">about</a></li>
			<!-- <li><a id="nav-search-btn" class="nav-icon" title="Search"></a></li> -->
			<!--  -->
		</ul>
	</nav>
	<div id="search-form-wrap">
		<form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://tbxark.site"></form>
	</div>
</header>

    <div id="main">
      <article id="post-2015-10-22-Swift-collection-type" class="post">
	<footer class="entry-meta-header">
		<span class="meta-elements date">
			<a href="/2015/10/22/2015-10-22-Swift-collection-type/" class="article-date">
  <time datetime="2015-10-22T07:05:16.000Z" itemprop="datePublished">2015-10-22</time>
</a>
		</span>
		<span class="meta-elements author">
  <div class="article-category">
    <a class="article-category-link" href="/categories/Swift/">Swift</a>
  </div>
</span>
		<div class="commentscount">
			
		</div>
	</footer>
	
	<header class="entry-header">
		
  
    <h1 class="article-title entry-title" itemprop="name">
      Swift笔记 - 集合类型
    </h1>
  

	</header>
	<div class="entry-content">
		
    	<p>Swift 中保留了 Foudation 框架中的集合类型,同时也添加了原生的集合类型,和 NSArray等不同,Swift 中的集合类型都是值类型<br><a id="more"></a></p>
<h1 id="集合类型">集合类型</h1><h2 id="值类型与引用类型">值类型与引用类型</h2><ul>
<li>swift 中所有集合类型(Set,Array,Dictionary)都是值类型容器,值类型在传递赋值过程中需要进行拷贝.但是 swift 对其进行了优化.值类型赋值或传递过程中复制的行为并不是马上发生的,而是只当值发生改变时才会产生复制.Swift 内建的值类型的容器类型在每次操作(增,删,改)时都需要复制一遍，即使是存储的都是引用类型.</li>
<li>原来 Foundation 框架中的集合类型(NSSet,NSArray,NSDictionary) 都是引用类型的容器.</li>
<li>在实际开发中按照具体的数据规模和操作特点来决定到时是使用值类型的容器还是引用类型的容器：在<strong>需要处理大量数据</strong>并且<strong>频繁操作 (增减) 其中元素时</strong>，选择 NSMutableArray 和 NSMutableDictionary 会更好，而对于容器内条目小而容器本身数目多的情况，应该使用 Swift 语言内建的 Array 和 Dictionary。</li>
</ul>
<h2 id="集合Set">集合Set</h2><p>  一个set无序的存储相同类型的不同的值.当一个数组元素的顺序不重要或者你需要保证这些value只出现一次的时候使用set.</p>
<h3 id="1-_语法">1. 语法</h3><p><code>Set&lt;SomeType&gt;</code>和<code>Array</code>不同的是,<code>Set</code>没有缩写方式.<code>var someSet =Set&lt;Character&gt;()</code>    或者如果上下文以及提供了类型信息,比如一个函数的参数或者一个已知类型的常量或变量.你可以创建用空的数组字面量创建一个空的集合   </p>
<pre><code>var someSet =<span class="operator"><span class="keyword">Set</span>&lt;<span class="built_in">Character</span>&gt;()// someSet现在包含一个<span class="built_in">Character</span>的值
someSet.<span class="keyword">insert</span>(<span class="string">"a"</span>)// someSet现在是一个空的<span class="keyword">set</span>,但是它仍然是一个存储<span class="built_in">Character</span>的<span class="keyword">set</span>.
<span class="keyword">var</span> someSet:<span class="keyword">Set</span>&lt;<span class="keyword">String</span>&gt; = [<span class="string">"L"</span>,<span class="string">"o"</span>,<span class="string">"v"</span>,<span class="string">"e"</span>]</span>
</code></pre><p>一个set不能单独的从数组字面量推断类型.所以set必须被明确的定义.然而根据swift的类型推断,当你用数组字面量初始化set的时候,如果包含的所以value是一种类型,你可以不写类型.</p>
<p>//判断一个set是否包含一个值</p>
<pre><code><span class="tag">var</span> isContainAValue = someSet.<span class="function"><span class="title">contains</span><span class="params">(<span class="string">"o"</span>)</span></span>
<span class="function"><span class="title">println</span><span class="params">(<span class="string">"/(isContainAValue)"</span>)</span></span>
</code></pre><p>//遍历一个set</p>
<pre><code><span class="keyword">for</span> itemin someSet {
    <span class="keyword">println</span>(<span class="string">"/(item)"</span>)
}
// 因为<span class="typename">set</span>类型没有顺序.所以要按照一个指定的顺序遍历<span class="typename">set</span>要使用全局sorted函数.
<span class="keyword">for</span> iteminsorted(someSet) {
    <span class="keyword">println</span>(<span class="string">"/(item)"</span>)
}
</code></pre><h3 id="2-_Set关系">2. Set关系</h3><p>你可以效率很高的进行一下set操作.比如合并两个set.获取两个集合的相同部分.或者判断两个集合包含所以的,一些或者都不包含一些值.</p>
<pre><code><span class="tag">var</span> firstSet  : Set = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]
<span class="tag">var</span> secondSet : Set = [<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>]

<span class="comment">//并集: uionSet = A+B</span>
<span class="tag">var</span> uionSet : Set = firstSet.<span class="function"><span class="title">union</span><span class="params">(secondSet)</span></span>
<span class="comment">//print(uionSet) [5, 7, 2, 3, 1, 4]</span>

<span class="comment">//交集: intersectSet = AB</span>
<span class="tag">var</span> intersectSet : Set = firstSet.<span class="function"><span class="title">intersect</span><span class="params">(secondSet)</span></span>
<span class="comment">//print(intersectSet) [3, 1]</span>

<span class="comment">//subtract = A - AB</span>
<span class="tag">var</span> subtract : Set = firstSet.<span class="function"><span class="title">subtract</span><span class="params">(secondSet)</span></span>
<span class="comment">//print(subtract) [2, 4]</span>

<span class="comment">//exclusiveOr = A+B - AB</span>
<span class="tag">var</span> exclusiveOr : Set = firstSet.<span class="function"><span class="title">exclusiveOr</span><span class="params">(secondSet)</span></span>
<span class="comment">//print(exclusiveOr) [5, 7, 2, 4]</span>
</code></pre><h3 id="3-_Set_比较">3. Set 比较</h3><pre><code><span class="tag">var</span> firstSet  : Set = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]
<span class="tag">var</span> secondSet : Set = [<span class="number">1</span>]

<span class="comment">//相等 判断</span>
<span class="tag">var</span> equal = (firstSet == secondSet)

<span class="comment">//子集/超集 判断</span>
<span class="tag">var</span> sonSet = firstSet.<span class="function"><span class="title">isSubsetOf</span><span class="params">(secondSet)</span></span>
<span class="tag">var</span> superSet = firstSet.<span class="function"><span class="title">isSupersetOf</span><span class="params">(secondSet)</span></span>

<span class="comment">//相交 判断</span>
<span class="tag">var</span> disJion = firstSet.<span class="function"><span class="title">isDisjointWith</span><span class="params">(secondSet)</span></span>

<span class="comment">//真子集/真超集 判断</span>
<span class="tag">var</span> realSonSet = firstSet.<span class="function"><span class="title">isStrictSubsetOf</span><span class="params">(secondSet)</span></span>
<span class="tag">var</span> realFatherSet = firstSet.<span class="function"><span class="title">isStrictSupersetOf</span><span class="params">(secondSet)</span></span>
</code></pre><h2 id="数组_Array">数组 Array</h2><h3 id="自定义下标">自定义下标</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> array = [<span class="number">111</span>,<span class="number">222</span>,<span class="number">333</span>,<span class="number">444</span>,<span class="number">555</span>]</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Array</span></span>&#123;</div><div class="line">    <span class="keyword">subscript</span>(s inputs:<span class="type">Int</span>...) -&gt; <span class="type">ArraySlice</span>&lt;<span class="type">Element</span>&gt;&#123;</div><div class="line">        <span class="keyword">get</span>&#123;</div><div class="line">            <span class="keyword">var</span> newArray = <span class="type">ArraySlice</span>&lt;<span class="type">Element</span>&gt;()</div><div class="line">            <span class="keyword">let</span> <span class="built_in">count</span> = <span class="keyword">self</span>.<span class="built_in">count</span></div><div class="line">            <span class="keyword">for</span> indexNum <span class="keyword">in</span> inputs</div><div class="line">            &#123;</div><div class="line">                <span class="built_in">assert</span>(indexNum &lt; <span class="built_in">count</span>, <span class="string">"Index out of range"</span>)</div><div class="line">                newArray.append(<span class="keyword">self</span>[indexNum])</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">return</span> newArray</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">set</span>&#123;</div><div class="line">            <span class="keyword">for</span> (index,i) <span class="keyword">in</span> inputs.<span class="built_in">enumerate</span>() &#123;</div><div class="line">                <span class="built_in">assert</span>(i &lt; <span class="keyword">self</span>.<span class="built_in">count</span>, <span class="string">"Index out of range"</span>)</div><div class="line">                <span class="keyword">self</span>[i] = newValue[index]</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//使用区间</span></div><div class="line">array[<span class="number">0</span>...<span class="number">1</span>] = [<span class="number">0</span>,<span class="number">0</span>]</div><div class="line"><span class="built_in">print</span>(array) <span class="comment">// [0, 0, 333, 444, 555]</span></div><div class="line"></div><div class="line"><span class="comment">//使用自定义数组</span></div><div class="line">array[s:<span class="number">0</span>] = [<span class="number">123456789</span>]</div><div class="line">array[s:<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>] = [<span class="number">123</span>,<span class="number">123</span>,<span class="number">123</span>]</div><div class="line"><span class="built_in">print</span>(array[s:<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]) <span class="comment">//[123, 123, 123, 555]</span></div></pre></td></tr></table></figure>
<h2 id="字典_Dictionary">字典 Dictionary</h2><p>当使用系统 json解析器时,会返回Foundation类型,所以没办法用 Swif 值类型进行取值和判断</p>
<h3 id="对未知_Key_的_Value_的判断">对未知 Key 的 Value 的判断</h3><h4 id="1-_传统判断">1. 传统判断</h4><figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> json = <span class="string">"&#123;\"</span>str\<span class="string">":\"</span>value\<span class="string">",\"</span>dict\<span class="string">":&#123;\"</span>subStr\<span class="string">":\"</span>value\<span class="string">"&#125;&#125;"</span></div><div class="line"><span class="keyword">var</span> data = json.dataUsingEncoding(NSUTF8StringEncoding)</div><div class="line"><span class="keyword">if</span> let jsonData = data</div><div class="line">&#123;</div><div class="line">    <span class="keyword">do</span>&#123;</div><div class="line">        <span class="keyword">var</span> dict : NSDictionary = try NSJSONSerialization.JSONObjectWithData(jsonData, options: NSJSONReadingOptions.AllowFragments) <span class="keyword">as</span>! NSDictionary</div><div class="line">        <span class="keyword">if</span> dict[<span class="string">"str"</span>] != nil &amp;&amp; <span class="built_in">String</span>(dict[<span class="string">"str"</span>]!) == <span class="string">"value"</span>&#123;</div><div class="line">            <span class="keyword">print</span>(<span class="string">"equal"</span>)</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            <span class="keyword">print</span>(<span class="string">"error"</span>)</div><div class="line">        &#125;</div><div class="line">    &#125;catch&#123;</div><div class="line">        <span class="keyword">print</span>(<span class="keyword">error</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="2-高阶函数+可选链">2.高阶函数+可选链</h4><figure class="highlight nimrod"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> dict : <span class="type">NSDictionary</span> = [<span class="string">"value"</span>:<span class="string">"key"</span>]</div><div class="line"><span class="keyword">let</span> <span class="literal">result</span> = (dict[<span class="string">"value"</span>] <span class="keyword">as</span>? <span class="type">NSString</span>).map&#123;<span class="type">String</span>($<span class="number">0</span>) == <span class="string">"key"</span>&#125;</div><div class="line"><span class="keyword">if</span> <span class="literal">result</span> != <span class="keyword">nil</span> &amp;&amp; <span class="literal">result</span>!&#123;</div><div class="line">    print(<span class="string">"Success"</span>)</div><div class="line">&#125;<span class="keyword">else</span>&#123;</div><div class="line">    print(<span class="string">"Error"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="3-_值类型判断">3. 值类型判断</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> dict = [<span class="string">"value"</span>:<span class="string">"key"</span>]</div><div class="line"><span class="keyword">if</span> dict[<span class="string">"values"</span>] == <span class="string">"key"</span>&#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"Success"</span>)</div><div class="line">&#125;<span class="keyword">else</span>&#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"Error"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="4-where_操作符">4.where 操作符</h4><figure class="highlight xquery"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> dict : NSDictionary = [<span class="string">"key"</span>:<span class="string">"value"</span>,<span class="string">"key2"</span>:<span class="string">"values"</span>]</div><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> <span class="keyword">value</span> :NSString = dict[<span class="string">"key"</span>] <span class="keyword">as</span>? NSString <span class="keyword">where</span> <span class="keyword">value</span>.isEqualToString(<span class="string">"value"</span>)&#123;</div><div class="line">    print(<span class="string">"Same"</span>)</div><div class="line">&#125;<span class="keyword">else</span>&#123;</div><div class="line">    print(<span class="string">"Not Same"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>

    
	</div>
	<footer class="entry-footer">
		<div class="entry-meta-footer">
			<span class="tags">
				
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Swift-学习笔记/">Swift 学习笔记</a></li></ul>

			</span>
		</div>
	</footer>
	
    
<nav id="article-nav">
  
    <a href="/2015/10/22/2015-10-22-Swift-higher-order-functions/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Swift笔记 - 高阶函数
        
      </div>
    </a>
  
  
    <a href="/2015/10/21/2015-10-21-Swift-optional-type/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">
        
          Swift笔记 - 可选类型
        
      </div>
    </a>
  
</nav>

  
</article>





    </div>
    <div class="mb-search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:tbxark.site">
  </form>
</div>
<footer id="footer">
	<h1 class="footer-blog-title">
		<a href="/">TBXark</a>
	</h1>
	<span class="copyright">
		&copy; 2016 TBXark<br>
		Theme by <a href="http://sanographix.github.io/tumblr/apollo/" target="_blank">Apollo</a>
		Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
	</span>
</footer>

    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>



<script src="/js/script.js"></script>
  </div>
</body>
</html>